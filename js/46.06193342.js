"use strict";(self["webpackChunkdebug_bridge_client_tasty"]=self["webpackChunkdebug_bridge_client_tasty"]||[]).push([[46],{46:function(e,a,t){t.r(a),t.d(a,{default:function(){return L}});t(8992),t(2577),t(3949),t(1454);var l=t(6768),n=t(4232),u=t(144),s=t(1219),o=t(158);function d(e){return(0,o.A)({url:`http://${e}/ping`,method:"get",params:{}})}function i(e){return(0,o.A)({url:`http://${e}/bridge/pids`,method:"get",params:{}})}function r(e,a){return(0,o.A)({url:`http://${e}/bridge/content/all?pid=${a}`,method:"get",params:{}})}function c(e,a,t,l){return(0,o.A)({url:`http://${e}/bridge/content?pid=${a}&start_line=${t}&line_length=${l}`,method:"get",params:{}})}function p(e,a){return(0,o.A)({url:`http://${e}/bridge/pid/stop?pid=${a}`,method:"post",data:{}})}function v(e,a){return(0,o.A)({url:`http://${e}/bridge/pid/clear?pid=${a}`,method:"post",data:{}})}function f(e){return(0,o.A)({url:`http://${e}/bridge/pids/clear`,method:"post",data:{}})}function m(e,a){return(0,o.A)({url:`http://${e}/bridge/run`,method:"post",data:{command:a}})}function g(){return[{index:"1",name:"x415",defaultDirectory:"C:\\agent\\_work\\1\\s",host:"10.86.212.244",port:"8001",defaultCommand:"pytest --env=x415 --dut=platform_gandalf -k test_get_device_build_info",status:"info"},{index:"2",name:"x416",defaultDirectory:"C:\\agent\\_work\\1\\s",host:"10.86.212.222",port:"8001",defaultCommand:"pytest --env=x416 --dut=platform_gandalf -k test_get_device_build_info",status:"info"},{index:"3",name:"x417",defaultDirectory:"C:\\agent\\_work\\9\\s",host:"10.86.212.224",port:"8001",defaultCommand:"pytest --env=x417 --dut=platform_gandalf -k test_get_device_build_info",status:"info"},{index:"4",name:"x425",defaultDirectory:"C:\\agent\\_work\\8\\s",host:"10.86.212.236",port:"8001",defaultCommand:"pytest --env=x425 --dut=platform_gandalf -k test_get_device_build_info",status:"info"},{index:"5",name:"x426",defaultDirectory:"C:\\agent\\_work\\8\\s",host:"10.86.212.238",port:"8001",defaultCommand:"pytest --env=x426 --dut=platform_gandalf -k test_get_device_build_info",status:"info"},{index:"6",name:"x427",defaultDirectory:"C:\\agent\\_work\\4\\s",host:"10.86.212.239",port:"8001",defaultCommand:"pytest --env=x427 --dut=platform_gandalf -k test_get_device_build_info",status:"info"}]}const b={class:"status-wrapper"},k={key:0},_={class:"mt-4"},y=["innerHTML"],h={style:{"padding-top":"20px"}},F={key:0},C={key:0,style:{"margin-left":"5px"}},w=["src"],x=10,$=100,R=800;var K=(0,l.pM)({__name:"HomePage",setup(e){const a=(0,u.KR)(g()),t=(0,u.KR)([]),o=(0,u.KR)(!1),K=(0,u.KR)("0"),D=(0,u.KR)(""),L=(0,u.KR)(""),V=(0,u.KR)(!1),O=(0,u.KR)("Please wait..."),I=window.innerHeight,W=(0,u.KR)(""),X=(0,u.KR)(""),A=(0,u.KR)(""),T=(0,u.KR)(""),E=(0,u.KR)(!1),P=(0,u.KR)(0);let H;const Q=(0,u.KR)(""),U=(0,u.KR)(""),S=(0,u.KR)(!0);let z;const M=(0,u.KR)(!1),N=(0,u.KR)(!1),Z=(0,u.KR)(24),j=(0,u.KR)(0),q=(0,u.KR)(!1);(0,l.KC)((async()=>{await B()})),(0,l.sV)((async()=>{}));const B=async()=>{o.value=!0,K.value="0",S.value=!0;const e=a.value.map((async e=>{e.status="info";const a=await d(`${e.host}:${e.port}`);e.status="success"==a.data?"success":"danger"}));await Promise.all(e);const t=await le();await G(),await ne(t),o.value=!1},G=async()=>{M.value=!0,ce(),Q.value=`http://${D.value}:${L.value}/bridge/screenshot?timestamp=${(new Date).getTime()}`,setTimeout((async()=>{S.value=!1,z=setInterval((async()=>{Q.value=`http://${D.value}:${L.value}/bridge/screenshot?timestamp=${(new Date).getTime()}`}),R),M.value=!1}),500)},J=()=>{U.value=Q.value,N.value=!0},Y=()=>{18!=j.value&&(Z.value-=1,j.value+=1)},ee=()=>{Z.value=14,j.value=10},ae=()=>{Z.value=14,j.value=10,q.value=!0},te=()=>{Z.value=24,j.value=0,q.value=!1},le=async()=>{const e=a.value.find((e=>"success"==e.status));if(e)return W.value=e.defaultCommand,X.value=e.defaultDirectory,K.value=e.index,V.value=!0,D.value=e.host,L.value=e.port,e},ne=async(e=null)=>{const a=null==e?D.value:e.host,l=null==e?L.value:e.port,n=await i(`${a}:${l}`),u=n.data?n.data:[];t.value=u.pids.map((e=>({value:e,label:e}))),T.value=t.value.length>0?t.value[0].value:""},ue=async e=>{V.value=!1,O.value="Please wait...",D.value=e.host,L.value=e.port,W.value="",X.value="",A.value="";const a=await d(`${e.host}:${e.port}`);"success"==a.data?(W.value=e.defaultCommand,X.value=e.defaultDirectory,V.value=!0,await ne(e)):O.value="The server is disconnected!"},se=(e,a,t,l)=>{"success"==e&&window.open(`/viewer?name=${a}&server=${t}:${l}`,"_blank")},oe=()=>{navigator.clipboard.writeText(W.value).then((()=>{(0,s.nk)({message:"Command is copied to clipboard.",type:"success"})})).catch((()=>{s.nk.error("Oops, failed to copy command to clipboard.")}))},de=async()=>{const e=`cd ${X.value} && ${W.value}`,a=await m(`${D.value}:${L.value}`,e);if("success"==a.data.status)return await ne(),(0,s.nk)({message:"Command is conducted.",type:"success"}),void await pe();s.nk.error("Oops, failed to conduct command.")},ie=()=>{navigator.clipboard.writeText(X.value).then((()=>{(0,s.nk)({message:"Directory is copied to clipboard.",type:"success"})})).catch((()=>{s.nk.error("Oops, failed to copy directory to clipboard.")}))},re=()=>{void 0!=H&&clearInterval(H)},ce=()=>{void 0!=z&&clearInterval(z)},pe=async()=>{re(),A.value="",P.value=0,await ve(),P.value+=1;let e=0;H=setInterval((async()=>{const a=await c(`${D.value}:${L.value}`,T.value,P.value,x);if(0!=a.data.content.length)return e=0,P.value+=a.data.content.length,void fe(a.data.content);e+=1,e==$&&clearInterval(H)}),R)},ve=async()=>{E.value=!0,A.value="",P.value=0;const e=await r(`${D.value}:${L.value}`,T.value);P.value=e.data.content.length,A.value+=`<span style="background-color: yellow">${e.data.command}</span><br/>`,fe(e.data.content),E.value=!1},fe=e=>{e.forEach((e=>{const a=e.toLowerCase();a.indexOf("error")>-1||a.indexOf("fail")>-1?A.value+=`<span style="background-color: red;color='white'">${a}</span><br/>`:a.indexOf("passed")>-1||a.indexOf("success")>-1?A.value+=`<span style="background-color: lightgreen">${a}</span><br/>`:A.value+=`<span>${a}</span><br/>`}))},me=async()=>{re();const e=await p(`${D.value}:${L.value}`,T.value);if("success"==e.data.status)return await ne(),void(0,s.nk)({message:"Current process is stopped.",type:"success"});s.nk.error("Oops, failed to stop current process.")},ge=async()=>{re();const e=await v(`${D.value}:${L.value}`,T.value);if("success"==e.data.status)return await ne(),(0,s.nk)({message:"Current process is terminated.",type:"success"}),void(A.value="");s.nk.error("Oops, failed to terminate current process.")},be=async()=>{re();const e=await f(`${D.value}:${L.value}`);if("success"==e.data.status)return await ne(),(0,s.nk)({message:"All processes are terminated.",type:"success"}),void(A.value="");s.nk.error("Oops, failed to terminate all processes.")};return(e,s)=>{const d=(0,l.g2)("el-badge"),i=(0,l.g2)("Cellphone"),r=(0,l.g2)("el-icon"),c=(0,l.g2)("el-menu-item"),p=(0,l.g2)("el-menu"),v=(0,l.g2)("el-button"),f=(0,l.g2)("el-aside"),m=(0,l.g2)("el-empty"),g=(0,l.g2)("FolderOpened"),x=(0,l.g2)("CopyDocument"),$=(0,l.g2)("el-tooltip"),R=(0,l.g2)("el-input"),D=(0,l.g2)("Operation"),L=(0,l.g2)("Pointer"),P=(0,l.g2)("el-option"),H=(0,l.g2)("el-select"),z=(0,l.g2)("el-button-group"),le=(0,l.g2)("View"),ne=(0,l.g2)("el-col"),re=(0,l.g2)("FullScreen"),ce=(0,l.g2)("ZoomIn"),ve=(0,l.g2)("Aim"),fe=(0,l.g2)("Refresh"),ke=(0,l.g2)("Hide"),_e=(0,l.g2)("el-row"),ye=(0,l.g2)("el-main"),he=(0,l.g2)("el-container"),Fe=(0,l.g2)("el-image"),Ce=(0,l.g2)("el-dialog"),we=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(he,{style:{display:"flex"}},{default:(0,l.k6)((()=>[(0,l.bF)(f,{style:(0,n.Tr)({"background-color":"#001f3f",width:"200px",margin:0,padding:0,height:(0,u.R1)(I)+"px"})},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(p,{"active-text-color":"#ffd04b","background-color":"#001f3f",class:"el-menu-vertical-demo","default-active":K.value,"text-color":"#fff",style:{width:"200px"}},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,(e=>((0,l.uX)(),(0,l.Wv)(c,{key:e.name,index:e.index,onClick:a=>ue(e)},{default:(0,l.k6)((()=>[(0,l.Lk)("div",b,[(0,l.bF)(d,{"is-dot":"",class:"status-dot",type:e.status},null,8,["type"]),(0,l.Lk)("span",null,[(0,l.eW)((0,n.v_)(e.name)+" ("+(0,n.v_)(e.host)+") ",1),(0,l.bF)(r,{onClick:a=>se(e.status,e.name,e.host,e.port)},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:2},1032,["onClick"])])])])),_:2},1032,["index","onClick"])))),128))])),_:1},8,["default-active"])]),(0,l.bF)(v,{type:"primary",onClick:B,loading:o.value},{default:(0,l.k6)((()=>[o.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",k,"Ping"))])),_:1},8,["loading"])])),_:1},8,["style"]),(0,l.bF)(ye,null,{default:(0,l.k6)((()=>[V.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(m,{key:0,description:O.value},null,8,["description"])),V.value?((0,l.uX)(),(0,l.Wv)(_e,{key:1,gutter:"1"},{default:(0,l.k6)((()=>[(0,l.bF)(ne,{span:Z.value},{default:(0,l.k6)((()=>[(0,l.Lk)("div",_,[(0,l.bF)(R,{modelValue:X.value,"onUpdate:modelValue":s[0]||(s[0]=e=>X.value=e),class:"input-with-select",clearable:""},{prepend:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1})])),append:(0,l.k6)((()=>[(0,l.bF)($,{class:"box-item",effect:"dark",content:"Copy",placement:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{onClick:ie},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(x)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(R,{modelValue:W.value,"onUpdate:modelValue":s[1]||(s[1]=e=>W.value=e),class:"input-with-select",clearable:"",style:{"padding-top":"5px","padding-bottom":"5px"}},{prepend:(0,l.k6)((()=>[(0,l.bF)(v,{onClick:oe},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(D)])),_:1})])),_:1})])),append:(0,l.k6)((()=>[(0,l.bF)($,{class:"box-item",effect:"dark",content:"Conduct",placement:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{onClick:de},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(L)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l.Lk)("div",{contenteditable:"true",innerHTML:A.value,class:"editable-area",placeholder:"This is logging area"},null,8,y),(0,l.Lk)("div",h,[s[9]||(s[9]=(0,l.eW)(" PIDs: ")),(0,l.bF)(H,{modelValue:T.value,"onUpdate:modelValue":s[2]||(s[2]=e=>T.value=e),class:"m-2",placeholder:"No data",size:"medium",style:{width:"200px"}},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.value,(e=>((0,l.uX)(),(0,l.Wv)(P,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,l.bF)(z,{class:"ml-4"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{type:"danger",disabled:!T.value,onClick:me},{default:(0,l.k6)((()=>s[5]||(s[5]=[(0,l.eW)("Stop")]))),_:1},8,["disabled"]),(0,l.bF)(v,{type:"danger",disabled:!T.value,onClick:ge},{default:(0,l.k6)((()=>s[6]||(s[6]=[(0,l.eW)("Delete")]))),_:1},8,["disabled"]),(0,l.bF)(v,{type:"danger",disabled:0==t.value.length,onClick:be},{default:(0,l.k6)((()=>s[7]||(s[7]=[(0,l.eW)("Delete All")]))),_:1},8,["disabled"])])),_:1}),(0,l.bF)(z,{class:"ml-4",style:{"padding-left":"10px"}},{default:(0,l.k6)((()=>[(0,l.bF)(v,{type:"info",onClick:s[3]||(s[3]=e=>A.value="")},{default:(0,l.k6)((()=>s[8]||(s[8]=[(0,l.eW)("Clear Log")]))),_:1}),(0,l.bF)(v,{type:"success",onClick:pe,disabled:!T.value,loading:E.value},{default:(0,l.k6)((()=>[E.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",F,"Load Log"))])),_:1},8,["disabled","loading"])])),_:1}),(0,l.bF)(z,{style:{"padding-left":"10px"}},{default:(0,l.k6)((()=>[q.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(v,{key:0,type:"primary",onClick:ae},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(le)])),_:1})])),_:1}))])),_:1})])])),_:1},8,["span"]),(0,l.bF)(ne,{span:j.value},{default:(0,l.k6)((()=>[q.value?(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",C,[s[10]||(s[10]=(0,l.Lk)("div",{style:{height:"74px"}},null,-1)),(0,l.Lk)("img",{class:"screenshot",id:"screenshotImg",draggable:"false",src:Q.value},null,8,w),(0,l.bF)(z,{class:"ml-4",style:{"padding-top":"30px"}},{default:(0,l.k6)((()=>[(0,l.bF)($,{class:"box-item",effect:"dark",content:"Pop Up",placement:"left"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{type:"primary",onClick:J},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(re)])),_:1})])),_:1})])),_:1}),(0,l.bF)($,{class:"box-item",effect:"dark",content:"Zoom In",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{type:"primary",onClick:Y},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(ce)])),_:1})])),_:1})])),_:1}),(0,l.bF)($,{class:"box-item",effect:"dark",content:"Resize",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{type:"primary",onClick:ee},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(ve)])),_:1})])),_:1})])),_:1}),(0,l.bF)($,{class:"box-item",effect:"dark",content:"Refresh",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{type:"primary",onClick:G,disabled:M.value},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(fe)])),_:1})])),_:1},8,["disabled"])])),_:1}),q.value?((0,l.uX)(),(0,l.Wv)($,{key:0,class:"box-item",effect:"dark",content:"Hide",placement:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{type:"primary",onClick:te},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(ke)])),_:1})])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})])),[[we,S.value]]):(0,l.Q3)("",!0)])),_:1},8,["span"])])),_:1})):(0,l.Q3)("",!0)])),_:1})])),_:1}),s[11]||(s[11]=(0,l.Lk)("canvas",{id:"canvas",style:{display:"none"}},null,-1)),(0,l.bF)(Ce,{modelValue:N.value,"onUpdate:modelValue":s[4]||(s[4]=e=>N.value=e),modal:!0,title:"SCREENSHOT",width:"70%",draggable:"","align-center":""},{default:(0,l.k6)((()=>[(0,l.bF)(Fe,{src:U.value,fit:"fill",id:"screenshotImg-zoom-in",draggable:"false"},null,8,["src"])])),_:1},8,["modelValue"])])}}});const D=K;var L=D}}]);
//# sourceMappingURL=46.06193342.js.map